from Essentials.utils import clear_console
from scapy.all import IP, ICMP, Raw, send
import random, time
from concurrent.futures import ThreadPoolExecutor, as_completed
import socket
import ipaddress
import threading
import multiprocessing
import subprocess
import os

def DOS_picking():
    
    while True:
        try:
            user_input1 = input("Provide the target's IP address: ").strip()
        except (EOFError, KeyboardInterrupt):
            print("\nInput cancelled.")
            break

        # Validate IP
        try:
            ipaddress.ip_address(user_input1)
            target = user_input1
        except ValueError:
            print("Please enter a valid IP address. Press Enter to try again.")
            input()
            continue

        # Ask for port
        try:
            user_input2 = input("Provide the specified Port: ").strip()
        except (EOFError, KeyboardInterrupt):
            print("\nInput cancelled.")
            break

        # Validate port
        try:
            port = int(user_input2)
            if not (0 <= port <= 65535):
                print("Port must be between 0 and 65535. Press Enter to try again.")
                input()
                continue
        except ValueError:
            print("Please provide a numeric port. Press Enter to try again.")
            input()
            continue

        break  # Exit loop if both IP and port are valid

    return target, port
    
def run():
    
    target, port = DOS_picking()

    if not os.path.exists("..\Killshot\categories\exploit\DOS"):
        subprocess.run(["gcc", "DOS.c", "-o", "DOS"])

    subprocess.run(["./DOS", "-t", target, "-p", port])

    